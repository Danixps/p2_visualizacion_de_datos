{"version":3,"file":"static/chunks/8471.b39887b0d2b072c2.js","mappings":"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","sources":["webpack://_N_E/../ui-core/src/ticks/TickLogDialog.tsx","webpack://_N_E/../ui-core/src/instance/ConcurrencyQueries.tsx","webpack://_N_E/../ui-core/src/hooks/useFavicon.tsx","webpack://_N_E/../ui-core/src/runs/Run.tsx","webpack://_N_E/../ui-core/src/runs/RunAssetCheckTags.tsx","webpack://_N_E/../ui-core/src/runs/RunAssetTags.tsx","webpack://_N_E/../ui-core/src/runs/RunAlertNotifications.oss.tsx","webpack://_N_E/../ui-core/src/runs/RunPoolsDialog.tsx","webpack://_N_E/../ui-core/src/runs/RunHeaderActions.tsx","webpack://_N_E/../ui-core/src/runs/RunTimingTags.tsx","webpack://_N_E/../ui-core/src/runs/TickTagForRun.tsx","webpack://_N_E/../ui-core/src/assets/AutomaterializeTagWithEvaluation.tsx","webpack://_N_E/../ui-core/src/runs/RunRoot.tsx","webpack://_N_E/../ui-core/src/runs/RunActionButtons.tsx"],"sourcesContent":["import {\n  Box,\n  Button,\n  Colors,\n  Dialog,\n  DialogFooter,\n  ExternalAnchorButton,\n  Icon,\n  NonIdealState,\n  SpinnerWithText,\n} from '@dagster-io/ui-components';\n\nimport {INSTIGATION_EVENT_LOG_FRAGMENT, InstigationEventLogTable} from './InstigationEventLogTable';\nimport {gql, useQuery} from '../apollo-client';\nimport {TickLogEventsQuery, TickLogEventsQueryVariables} from './types/TickLogDialog.types';\nimport {InstigationSelector} from '../graphql/types';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\n\nexport const TickLogDialog = ({\n  tickId,\n  timestamp,\n  instigationSelector,\n  isOpen,\n  onClose,\n}: {\n  tickId: string | null;\n  timestamp?: number;\n  instigationSelector: InstigationSelector;\n  isOpen: boolean;\n  onClose: () => void;\n}) => {\n  return (\n    <Dialog\n      isOpen={isOpen}\n      onClose={onClose}\n      style={{width: '70vw', maxWidth: '1200px', minWidth: '800px'}}\n      title={\n        <span>\n          {timestamp ? (\n            <span>\n              <span>Logs for {instigationSelector.name}: </span>\n              <TimestampDisplay timestamp={timestamp} timeFormat={{showSeconds: true}} />\n            </span>\n          ) : (\n            <span>Logs for {instigationSelector.name}</span>\n          )}\n        </span>\n      }\n    >\n      {tickId ? (\n        <QueryfulTickLogsTable instigationSelector={instigationSelector} tickId={tickId} />\n      ) : null}\n      {/* Use z-index to force the footer to sit above the lines of the logs table */}\n      <Box background={Colors.backgroundDefault()} style={{zIndex: 3, position: 'relative'}}>\n        <DialogFooter topBorder>\n          <Button onClick={onClose}>Done</Button>\n        </DialogFooter>\n      </Box>\n    </Dialog>\n  );\n};\n\ninterface TickLogTableProps {\n  tickId: string;\n  instigationSelector: InstigationSelector;\n}\n\nexport const QueryfulTickLogsTable = ({instigationSelector, tickId}: TickLogTableProps) => {\n  const {data, loading} = useQuery<TickLogEventsQuery, TickLogEventsQueryVariables>(\n    TICK_LOG_EVENTS_QUERY,\n    {\n      variables: {instigationSelector, tickId},\n      notifyOnNetworkStatusChange: true,\n    },\n  );\n\n  const events =\n    data?.instigationStateOrError.__typename === 'InstigationState' &&\n    data?.instigationStateOrError.tick\n      ? data?.instigationStateOrError.tick.logEvents.events\n      : undefined;\n\n  if (loading) {\n    return (\n      <Box style={{height: 500}} flex={{justifyContent: 'center', alignItems: 'center'}}>\n        <SpinnerWithText label=\"Loading logsâ€¦\" />\n      </Box>\n    );\n  }\n\n  if (events && events.length) {\n    return (\n      <Box style={{height: 500}} flex={{direction: 'column'}}>\n        <InstigationEventLogTable events={events} />\n      </Box>\n    );\n  }\n\n  const tickStatus =\n    data?.instigationStateOrError.__typename === 'InstigationState'\n      ? data?.instigationStateOrError.tick.status\n      : undefined;\n  const instigationType =\n    data?.instigationStateOrError.__typename === 'InstigationState'\n      ? data?.instigationStateOrError.instigationType\n      : undefined;\n  const instigationLoggingDocsUrl =\n    instigationType === 'SENSOR'\n      ? 'https://docs.dagster.io/concepts/partitions-schedules-sensors/sensors#logging-in-sensors'\n      : instigationType === 'SCHEDULE'\n        ? 'https://docs.dagster.io/concepts/partitions-schedules-sensors/schedules#logging-in-schedules'\n        : undefined;\n\n  return (\n    <Box\n      style={{height: 500}}\n      flex={{justifyContent: 'center', alignItems: 'center'}}\n      padding={{vertical: 48}}\n    >\n      <NonIdealState\n        icon=\"no-results\"\n        title=\"No logs to display\"\n        description={\n          <Box flex={{direction: 'column', gap: 12}}>\n            <div>\n              Your evaluation did not emit any logs. To learn how to emit logs in your evaluation,\n              visit the documentation for more information.\n            </div>\n            {tickStatus === 'FAILURE' && (\n              <>\n                <div>\n                  For failed evaluations, logs will only be displayed if your Dagster and Dagster\n                  Cloud agent versions 1.5.14 or higher.\n                </div>\n                <div>Upgrade your Dagster versions to view logs for failed evaluations.</div>\n              </>\n            )}\n          </Box>\n        }\n        action={\n          instigationLoggingDocsUrl && (\n            <ExternalAnchorButton\n              href={instigationLoggingDocsUrl}\n              rightIcon={<Icon name=\"open_in_new\" />}\n            >\n              View documentation\n            </ExternalAnchorButton>\n          )\n        }\n      />\n    </Box>\n  );\n};\n\nconst TICK_LOG_EVENTS_QUERY = gql`\n  query TickLogEventsQuery($instigationSelector: InstigationSelector!, $tickId: ID!) {\n    instigationStateOrError(instigationSelector: $instigationSelector) {\n      ... on InstigationState {\n        id\n        instigationType\n        tick(tickId: $tickId) {\n          id\n          status\n          timestamp\n          logEvents {\n            events {\n              ...InstigationEventLog\n            }\n          }\n        }\n      }\n    }\n  }\n  ${INSTIGATION_EVENT_LOG_FRAGMENT}\n`;\n","import {gql} from '../apollo-client';\n\nexport const SET_CONCURRENCY_LIMIT_MUTATION = gql`\n  mutation SetConcurrencyLimit($concurrencyKey: String!, $limit: Int!) {\n    setConcurrencyLimit(concurrencyKey: $concurrencyKey, limit: $limit)\n  }\n`;\n\nexport const DELETE_CONCURRENCY_LIMIT_MUTATION = gql`\n  mutation DeleteConcurrencyLimit($concurrencyKey: String!) {\n    deleteConcurrencyLimit(concurrencyKey: $concurrencyKey)\n  }\n`;\n\nexport const FREE_CONCURRENCY_SLOTS_MUTATION = gql`\n  mutation FreeConcurrencySlots($runId: String!, $stepKey: String) {\n    freeConcurrencySlots(runId: $runId, stepKey: $stepKey)\n  }\n`;\n\nexport const RUNS_FOR_CONCURRENCY_KEY_QUERY = gql`\n  query RunsForConcurrencyKeyQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          status\n        }\n      }\n    }\n  }\n`;\n","import {useEffect} from 'react';\n\nexport const useFavicon = (href: string) => {\n  useEffect(() => {\n    const el = document.querySelector('link[rel=\"icon\"][type=\"image/svg+xml\"]');\n    if (!el) {\n      return;\n    }\n    const previousHref = el.getAttribute('href');\n    el.setAttribute('href', href);\n    return () => {\n      if (previousHref) {\n        el.setAttribute('href', previousHref);\n      }\n    };\n  }, [href]);\n};\n","import {\n  Box,\n  Button,\n  Colors,\n  ErrorBoundary,\n  Icon,\n  NonIdealState,\n  SplitPanelContainer,\n  SplitPanelContainerHandle,\n  Tooltip,\n} from '@dagster-io/ui-components';\nimport * as React from 'react';\nimport {memo, useLayoutEffect, useMemo, useRef, useState} from 'react';\nimport {Link} from 'react-router-dom';\nimport styled from 'styled-components';\n\nimport {CapturedOrExternalLogPanel} from './CapturedLogPanel';\nimport {LogFilter, LogsProvider, LogsProviderLogs} from './LogsProvider';\nimport {LogsScrollingTable} from './LogsScrollingTable';\nimport {LogType, LogsToolbar} from './LogsToolbar';\nimport {RunActionButtons} from './RunActionButtons';\nimport {RunContext} from './RunContext';\nimport {IRunMetadataDict, RunMetadataProvider} from './RunMetadataProvider';\nimport {runsPathWithFilters} from './RunsFilterInput';\nimport {showCustomAlert} from '../app/CustomAlertProvider';\nimport {PythonErrorInfo} from '../app/PythonErrorInfo';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {GanttChart, GanttChartLoadingState, GanttChartMode} from '../gantt/GanttChart';\nimport {toGraphQueryItems} from '../gantt/toGraphQueryItems';\nimport {RunStatus} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {useFavicon} from '../hooks/useFavicon';\nimport {useQueryPersistedState} from '../hooks/useQueryPersistedState';\nimport {CompletionType, useTraceDependency} from '../performance/TraceContext';\nimport {filterRunSelectionByQuery} from '../run-selection/AntlrRunSelection';\nimport {RunDagsterRunEventFragment, RunPageFragment} from './types/RunFragments.types';\nimport {\n  matchingComputeLogKeyFromStepKey,\n  useComputeLogFileKeyForSelection,\n} from './useComputeLogFileKeyForSelection';\nimport {useQueryPersistedLogFilter} from './useQueryPersistedLogFilter';\n\ninterface RunProps {\n  runId: string;\n  run?: RunPageFragment;\n}\n\nconst runStatusFavicon = (status: RunStatus) => {\n  switch (status) {\n    case RunStatus.FAILURE:\n      return '/favicon-run-failed.svg';\n    case RunStatus.SUCCESS:\n      return '/favicon-run-success.svg';\n    case RunStatus.STARTING:\n    case RunStatus.STARTED:\n    case RunStatus.CANCELING:\n      return '/favicon-run-pending.svg';\n    default:\n      return '/favicon.svg';\n  }\n};\n\nexport const Run = memo((props: RunProps) => {\n  const {run, runId} = props;\n  const [logsFilter, setLogsFilter] = useQueryPersistedLogFilter();\n  const [selectionQuery, setSelectionQuery] = useQueryPersistedState<string>({\n    queryKey: 'selection',\n    defaults: {selection: ''},\n  });\n\n  useFavicon(run ? runStatusFavicon(run.status) : '/favicon.svg');\n  useDocumentTitle(\n    run\n      ? `${!isHiddenAssetGroupJob(run.pipelineName) ? run.pipelineName : ''} ${runId.slice(\n          0,\n          8,\n        )} [${run.status}]`\n      : `Run: ${runId}`,\n  );\n\n  const onShowStateDetails = (stepKey: string, logs: RunDagsterRunEventFragment[]) => {\n    const errorNode = logs.find(\n      (node) => node.__typename === 'ExecutionStepFailureEvent' && node.stepKey === stepKey,\n    );\n\n    if (errorNode) {\n      showCustomAlert({\n        body: <PythonErrorInfo error={errorNode} />,\n      });\n    }\n  };\n\n  const onSetSelectionQuery = (query: string) => {\n    setSelectionQuery(query);\n    setLogsFilter({\n      ...logsFilter,\n      logQuery: query !== '*' ? [{token: 'query', value: query}] : [],\n    });\n  };\n\n  const logsDependency = useTraceDependency('RunLogs');\n\n  return (\n    <RunContext.Provider value={run}>\n      <LogsProvider key={runId} runId={runId}>\n        {(logs) => (\n          <>\n            <OnLogsLoaded dependency={logsDependency} logs={logs} />\n            <RunMetadataProvider logs={logs}>\n              {(metadata) => (\n                <RunWithData\n                  run={run}\n                  runId={runId}\n                  logs={logs}\n                  logsFilter={logsFilter}\n                  metadata={metadata}\n                  selectionQuery={selectionQuery}\n                  onSetLogsFilter={setLogsFilter}\n                  onSetSelectionQuery={onSetSelectionQuery}\n                  onShowStateDetails={onShowStateDetails}\n                />\n              )}\n            </RunMetadataProvider>\n          </>\n        )}\n      </LogsProvider>\n    </RunContext.Provider>\n  );\n});\n\nconst OnLogsLoaded = ({\n  dependency,\n  logs,\n}: {\n  dependency: ReturnType<typeof useTraceDependency>;\n  logs: LogsProviderLogs;\n}) => {\n  useLayoutEffect(() => {\n    if (!logs.loading) {\n      dependency.completeDependency(CompletionType.SUCCESS);\n    }\n  }, [dependency, logs]);\n  return null;\n};\n\ninterface RunWithDataProps {\n  run?: RunPageFragment;\n  runId: string;\n  selectionQuery: string;\n  logs: LogsProviderLogs;\n  logsFilter: LogFilter;\n  metadata: IRunMetadataDict;\n  onSetLogsFilter: (v: LogFilter) => void;\n  onSetSelectionQuery: (query: string) => void;\n  onShowStateDetails: (stepKey: string, logs: RunDagsterRunEventFragment[]) => void;\n}\n\nconst logTypeFromQuery = (queryLogType: string) => {\n  switch (queryLogType) {\n    case 'stdout':\n      return LogType.stdout;\n    case 'stderr':\n      return LogType.stderr;\n    default:\n      return LogType.structured;\n  }\n};\n\n/**\n * Note: There are two places we keep a \"step query string\" in the Run view:\n * selectionQuery and logsFilter.logsQuery.\n *\n * - selectionQuery is set when you click around in the Gannt view and is the\n *   selection used for re-execution, etc. When set, we autofill logsFilter.logsQuery.\n *\n * - logsFilter.logsQuery is used for filtering the logs. It can be cleared separately\n *   from the selectionQuery, so you can select a step but navigate elsewhere in the logs.\n *\n * We could revisit this in the future but I believe we iterated quite a bit to get to this\n * solution and we should avoid locking the two filter inputs together completely.\n */\nconst RunWithData = ({\n  run,\n  runId,\n  logs,\n  logsFilter,\n  metadata,\n  selectionQuery,\n  onSetLogsFilter,\n  onSetSelectionQuery,\n}: RunWithDataProps) => {\n  const [queryLogType, setQueryLogType] = useQueryPersistedState<string>({\n    queryKey: 'logType',\n    defaults: {logType: LogType.structured},\n  });\n\n  const logType = logTypeFromQuery(queryLogType);\n  const setLogType = (lt: LogType) => setQueryLogType(LogType[lt]);\n  const [computeLogUrl, setComputeLogUrl] = useState<string | null>(null);\n\n  const stepKeysJSON = JSON.stringify(Object.keys(metadata.steps).sort());\n  const stepKeys = useMemo(() => JSON.parse(stepKeysJSON), [stepKeysJSON]);\n\n  const runtimeGraph = run?.executionPlan && toGraphQueryItems(run?.executionPlan, metadata.steps);\n\n  const selectionStepKeys = useMemo(() => {\n    return runtimeGraph && selectionQuery && selectionQuery !== '*'\n      ? filterRunSelectionByQuery(runtimeGraph, selectionQuery).all.map((n) => n.name)\n      : [];\n  }, [runtimeGraph, selectionQuery]);\n\n  const selection = useMemo(\n    () => ({\n      query: selectionQuery,\n      keys: selectionStepKeys,\n    }),\n    [selectionStepKeys, selectionQuery],\n  );\n\n  const {logCaptureInfo, computeLogFileKey, setComputeLogFileKey} =\n    useComputeLogFileKeyForSelection({\n      stepKeys,\n      selectionStepKeys,\n      metadata,\n      defaultToFirstStep: false,\n    });\n\n  const logsFilterStepKeys = useMemo(\n    () =>\n      runtimeGraph\n        ? logsFilter.logQuery\n            .filter((v) => v.token && v.token === 'query')\n            .reduce((accum, v) => {\n              accum.push(\n                ...filterRunSelectionByQuery(runtimeGraph, v.value).all.map((n) => n.name),\n              );\n              return accum;\n            }, [] as string[])\n        : [],\n    [logsFilter.logQuery, runtimeGraph],\n  );\n\n  const onClickStep = (stepKey: string, evt: React.MouseEvent<any>) => {\n    const index = selectionStepKeys.indexOf(stepKey);\n    let nextSelectionQuery = selectionQuery;\n    if (evt.shiftKey) {\n      // shift-click to multi select steps, preserving quotations if present\n\n      if (index !== -1) {\n        // deselect the step if already selected\n        nextSelectionQuery = removeStepFromSelection(nextSelectionQuery, stepKey);\n      } else {\n        // select the step otherwise\n        nextSelectionQuery = addStepToSelection(nextSelectionQuery, stepKey);\n      }\n    } else {\n      // deselect the step if already selected\n      if (selectionStepKeys.length === 1 && index !== -1) {\n        nextSelectionQuery = '';\n      } else {\n        // select the step otherwise\n        nextSelectionQuery = `name:\"${stepKey}\"`;\n\n        // When only one step is selected, set the compute log key as well.\n        const matchingLogKey = matchingComputeLogKeyFromStepKey(metadata.logCaptureSteps, stepKey);\n        if (matchingLogKey) {\n          setComputeLogFileKey(matchingLogKey);\n        }\n      }\n    }\n\n    onSetSelectionQuery(nextSelectionQuery);\n  };\n\n  const [expandedPanel, setExpandedPanel] = useState<null | 'top' | 'bottom'>(null);\n  const containerRef = useRef<SplitPanelContainerHandle>(null);\n\n  useLayoutEffect(() => {\n    if (containerRef.current) {\n      const size = containerRef.current.getSize();\n      if (size === 100) {\n        setExpandedPanel('top');\n      } else if (size === 0) {\n        setExpandedPanel('bottom');\n      }\n    }\n  }, []);\n\n  const isTopExpanded = expandedPanel === 'top';\n  const isBottomExpanded = expandedPanel === 'bottom';\n\n  const expandBottomPanel = () => {\n    containerRef.current?.changeSize(0);\n    setExpandedPanel('bottom');\n  };\n  const expandTopPanel = () => {\n    containerRef.current?.changeSize(100);\n    setExpandedPanel('top');\n  };\n  const resetPanels = () => {\n    containerRef.current?.changeSize(50);\n    setExpandedPanel(null);\n  };\n\n  const gantt = (metadata: IRunMetadataDict) => {\n    if (!run) {\n      return <GanttChartLoadingState runId={runId} />;\n    }\n\n    if (run.executionPlan && runtimeGraph) {\n      return (\n        <ErrorBoundary region=\"gantt chart\">\n          <GanttChart\n            options={{\n              mode: GanttChartMode.WATERFALL_TIMED,\n            }}\n            toolbarActions={\n              <Box flex={{direction: 'row', alignItems: 'center', gap: 12}}>\n                <Tooltip content={isTopExpanded ? 'Collapse' : 'Expand'}>\n                  <Button\n                    icon={<Icon name={isTopExpanded ? 'collapse_arrows' : 'expand_arrows'} />}\n                    onClick={isTopExpanded ? resetPanels : expandTopPanel}\n                  />\n                </Tooltip>\n                <RunActionButtons\n                  run={run}\n                  graph={runtimeGraph}\n                  metadata={metadata}\n                  selection={selection}\n                />\n              </Box>\n            }\n            runId={runId}\n            graph={runtimeGraph}\n            metadata={metadata}\n            selection={selection}\n            onClickStep={onClickStep}\n            onSetSelection={onSetSelectionQuery}\n            focusedTime={logsFilter.focusedTime}\n          />\n        </ErrorBoundary>\n      );\n    }\n\n    return <NonIdealState icon=\"error\" title=\"Unable to build execution plan\" />;\n  };\n\n  const logContent = () => {\n    if (run?.status === 'QUEUED') {\n      return (\n        <NonIdealState\n          icon=\"arrow_forward\"\n          title=\"Run queued\"\n          description=\"This run is queued for execution and will start soon.\"\n          action={\n            <Link to={runsPathWithFilters([{token: 'status', value: 'QUEUED'}])}>\n              View queued runs\n            </Link>\n          }\n        />\n      );\n    }\n    if (logType === LogType.structured) {\n      return (\n        <LogsScrollingTable\n          logs={logs}\n          filter={logsFilter}\n          filterStepKeys={logsFilterStepKeys}\n          filterKey={`${JSON.stringify(logsFilter)}`}\n          metadata={metadata}\n        />\n      );\n    }\n    if (computeLogFileKey) {\n      return (\n        <CapturedOrExternalLogPanel\n          logKey={computeLogFileKey ? [runId, 'compute_logs', computeLogFileKey] : []}\n          logCaptureInfo={logCaptureInfo}\n          visibleIOType={LogType[logType]}\n          onSetDownloadUrl={setComputeLogUrl}\n        />\n      );\n    }\n    return <NoStepSelectionState type={logType} />;\n  };\n\n  return (\n    <>\n      <SplitPanelContainer\n        ref={containerRef}\n        axis=\"vertical\"\n        identifier=\"run-gantt\"\n        firstInitialPercent={35}\n        firstMinSize={56}\n        first={gantt(metadata)}\n        secondMinSize={56}\n        second={\n          <ErrorBoundary region=\"logs\">\n            <LogsContainer>\n              <LogsToolbar\n                logType={logType}\n                onSetLogType={setLogType}\n                filter={logsFilter}\n                onSetFilter={onSetLogsFilter}\n                steps={stepKeys}\n                metadata={metadata}\n                computeLogFileKey={computeLogFileKey}\n                onSetComputeLogKey={setComputeLogFileKey}\n                computeLogUrl={computeLogUrl}\n                counts={logs.counts}\n                isSectionExpanded={isBottomExpanded}\n                toggleExpanded={isBottomExpanded ? resetPanels : expandBottomPanel}\n              />\n              {logContent()}\n            </LogsContainer>\n          </ErrorBoundary>\n        }\n      />\n    </>\n  );\n};\n\nconst LogsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n`;\n\nconst NoStepSelectionState = ({type}: {type: LogType}) => {\n  return (\n    <Box\n      flex={{\n        direction: 'row',\n        grow: 1,\n        alignItems: 'center',\n        justifyContent: 'center',\n      }}\n      style={{background: Colors.backgroundDefault()}}\n    >\n      <NonIdealState\n        title={`Select a step to view ${type}`}\n        icon=\"warning\"\n        description=\"Select a step on the Gantt chart or from the dropdown above to view logs.\"\n      />\n    </Box>\n  );\n};\n\nfunction removeStepFromSelection(selectionQuery: string, stepKey: string) {\n  return `(${selectionQuery}) and not name:\"${stepKey}\"`;\n}\n\nfunction addStepToSelection(selectionQuery: string, stepKey: string) {\n  return `(${selectionQuery}) or name:\"${stepKey}\"`;\n}\n","import {AssetCheckTagCollection} from './AssetTagCollections';\nimport {gql, useQuery} from '../apollo-client';\nimport {RunAssetChecksQuery, RunAssetChecksQueryVariables} from './types/RunAssetCheckTags.types';\nimport {RunFragment} from './types/RunFragments.types';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\n\nexport const RunAssetCheckTags = (props: {\n  run: Pick<RunFragment, 'id' | 'pipelineName' | 'assetCheckSelection'>;\n}) => {\n  const {run} = props;\n  const skip = isHiddenAssetGroupJob(run.pipelineName);\n  const queryResult = useQuery<RunAssetChecksQuery, RunAssetChecksQueryVariables>(\n    RUN_ASSETS_CHECKS_QUERY,\n    {\n      variables: {runId: run.id},\n      skip,\n    },\n  );\n  const {data, loading} = queryResult;\n\n  if (loading || !data || data.pipelineRunOrError.__typename !== 'Run') {\n    return null;\n  }\n\n  const assetChecks = skip ? run.assetCheckSelection : data.pipelineRunOrError.assetChecks;\n\n  return <AssetCheckTagCollection assetChecks={assetChecks} />;\n};\n\nconst RUN_ASSETS_CHECKS_QUERY = gql`\n  query RunAssetChecksQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        assetChecks {\n          name\n          assetKey {\n            path\n          }\n        }\n      }\n    }\n  }\n`;\n","import {useMemo} from 'react';\n\nimport {AssetKeyTagCollection} from './AssetTagCollections';\nimport {assetKeysForRun} from './RunUtils';\nimport {gql, useQuery} from '../apollo-client';\nimport {RunAssetsQuery, RunAssetsQueryVariables} from './types/RunAssetTags.types';\nimport {RunFragment} from './types/RunFragments.types';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\n\nexport const RunAssetTags = (props: {\n  run: Pick<RunFragment, 'id' | 'stepKeysToExecute' | 'pipelineName' | 'assetSelection'>;\n}) => {\n  const {run} = props;\n  const skip = isHiddenAssetGroupJob(run.pipelineName);\n  const queryResult = useQuery<RunAssetsQuery, RunAssetsQueryVariables>(RUN_ASSETS_QUERY, {\n    variables: {runId: run.id},\n    skip,\n    fetchPolicy: 'no-cache',\n  });\n\n  const assetKeys = useMemo(() => {\n    const {data} = queryResult;\n    let keys = null;\n    if (data?.pipelineRunOrError.__typename === 'Run') {\n      keys = data.pipelineRunOrError.assets.map((a) => a.key);\n    }\n\n    return skip ? assetKeysForRun(run) : keys;\n  }, [queryResult, run, skip]);\n\n  return <AssetKeyTagCollection useTags assetKeys={assetKeys} />;\n};\n\nconst RUN_ASSETS_QUERY = gql`\n  query RunAssetsQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        assets {\n          id\n          key {\n            path\n          }\n        }\n      }\n    }\n  }\n`;\n","export const RunAlertNotifications = (_props: {runId: string}) => null;\n","import {Box, Button, Dialog, DialogFooter} from '@dagster-io/ui-components';\n\nimport {PoolTag} from '../instance/PoolTag';\n\nexport const RunPoolsDialog = ({\n  isOpen,\n  onClose,\n  pools,\n}: {\n  isOpen: boolean;\n  onClose: () => void;\n  pools: string[];\n}) => {\n  return (\n    <Dialog isOpen={isOpen} onClose={onClose} canOutsideClickClose canEscapeKeyClose title=\"Pools\">\n      <Box margin={{horizontal: 24, vertical: 12}} flex={{gap: 12}}>\n        {pools.map((pool) => (\n          <PoolTag key={pool} pool={pool} />\n        ))}\n      </Box>\n      <DialogFooter topBorder>\n        <Button onClick={onClose} intent=\"primary\">\n          Close\n        </Button>\n      </DialogFooter>\n    </Dialog>\n  );\n};\n","import {Box, Button, Icon, Menu, MenuItem, Popover, Tooltip} from '@dagster-io/ui-components';\nimport {useContext, useState} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport {AISummaryForRunMenuItem} from 'shared/runs/AISummaryForRunMenuItem.oss';\nimport {RunAlertNotifications} from 'shared/runs/RunAlertNotifications.oss';\nimport {RunMetricsDialog} from 'shared/runs/RunMetricsDialog.oss';\n\nimport {DeletionDialog} from './DeletionDialog';\nimport {QueuedRunCriteriaDialog} from './QueuedRunCriteriaDialog';\nimport {RunConfigDialog} from './RunConfigDialog';\nimport {RunPoolsDialog} from './RunPoolsDialog';\nimport {doneStatuses} from './RunStatuses';\nimport {RunsQueryRefetchContext} from './RunUtils';\nimport {TerminationDialog} from './TerminationDialog';\nimport {useMutation} from '../apollo-client';\nimport {isExternalRun} from './externalRuns';\nimport {RunFragment} from './types/RunFragments.types';\nimport {AppContext} from '../app/AppContext';\nimport {showSharedToaster} from '../app/DomUtils';\nimport {RunStatus} from '../graphql/types';\nimport {FREE_CONCURRENCY_SLOTS_MUTATION} from '../instance/ConcurrencyQueries';\nimport {\n  FreeConcurrencySlotsMutation,\n  FreeConcurrencySlotsMutationVariables,\n} from '../instance/types/ConcurrencyQueries.types';\nimport {AnchorButton} from '../ui/AnchorButton';\nimport {workspacePipelineLinkForRun, workspacePipelinePath} from '../workspace/workspacePath';\n\ntype VisibleDialog =\n  | 'config'\n  | 'delete'\n  | 'terminate'\n  | 'queue-criteria'\n  | 'free_slots'\n  | 'metrics'\n  | 'pools'\n  | null;\n\nexport const RunHeaderActions = ({run, isJob}: {run: RunFragment; isJob: boolean}) => {\n  const runMetricsEnabled = run.hasRunMetricsEnabled;\n\n  const [visibleDialog, setVisibleDialog] = useState<VisibleDialog>(null);\n\n  const {rootServerURI} = useContext(AppContext);\n  const {refetch} = useContext(RunsQueryRefetchContext);\n\n  const history = useHistory();\n\n  const [freeSlots] = useMutation<\n    FreeConcurrencySlotsMutation,\n    FreeConcurrencySlotsMutationVariables\n  >(FREE_CONCURRENCY_SLOTS_MUTATION);\n\n  const freeConcurrencySlots = async () => {\n    const resp = await freeSlots({variables: {runId: run.id}});\n    if (resp.data?.freeConcurrencySlots) {\n      await showSharedToaster({\n        intent: 'success',\n        icon: 'check_circle',\n        message: 'Freed concurrency slots',\n      });\n    }\n  };\n\n  const jobLink = workspacePipelineLinkForRun({\n    repositoryName: run.repositoryOrigin?.repositoryName,\n    repositoryLocationName: run.repositoryOrigin?.repositoryLocationName,\n    run,\n    isJob,\n  });\n\n  return (\n    <div>\n      <Box flex={{direction: 'row', gap: 8}}>\n        <RunAlertNotifications runId={run.id} />\n        {jobLink.disabledReason ? (\n          <Tooltip content={jobLink.disabledReason}>\n            <Button icon={<Icon name={jobLink.icon} />} disabled>\n              {jobLink.label}\n            </Button>\n          </Tooltip>\n        ) : (\n          <AnchorButton icon={<Icon name={jobLink.icon} />} to={jobLink.to}>\n            {jobLink.label}\n          </AnchorButton>\n        )}\n        <Button icon={<Icon name=\"tag\" />} onClick={() => setVisibleDialog('config')}>\n          View tags and config\n        </Button>\n        {run.allPools && run.allPools.length ? (\n          <Tooltip content=\"View pools\" position=\"top\">\n            <Button icon={<Icon name=\"concurrency\" />} onClick={() => setVisibleDialog('pools')} />\n          </Tooltip>\n        ) : null}\n        {!isExternalRun(run) || run.hasDeletePermission ? (\n          <Popover\n            position=\"bottom-right\"\n            content={\n              <Menu>\n                {!isExternalRun(run) ? (\n                  <>\n                    <AISummaryForRunMenuItem run={run} />\n                    <Tooltip content=\"Loadable in dagster-webserver-debug\" position=\"left\">\n                      <MenuItem\n                        text=\"Download debug file\"\n                        icon=\"download_for_offline\"\n                        // eslint-disable-next-line no-restricted-properties\n                        onClick={() => window.open(`${rootServerURI}/download_debug/${run.id}`)}\n                      />\n                    </Tooltip>\n                    {run.status === RunStatus.QUEUED ? (\n                      <MenuItem\n                        icon=\"history_toggle_off\"\n                        text=\"View queue criteria\"\n                        intent=\"none\"\n                        onClick={() => setVisibleDialog('queue-criteria')}\n                      />\n                    ) : null}\n                    {runMetricsEnabled && RunMetricsDialog ? (\n                      <MenuItem\n                        icon=\"asset_plot\"\n                        text=\"View container metrics\"\n                        intent=\"none\"\n                        onClick={() => setVisibleDialog('metrics')}\n                      />\n                    ) : null}\n                    {run.hasConcurrencyKeySlots && doneStatuses.has(run.status) ? (\n                      <MenuItem\n                        text=\"Free concurrency slots\"\n                        icon=\"lock\"\n                        onClick={freeConcurrencySlots}\n                      />\n                    ) : null}\n                  </>\n                ) : null}\n                {run.hasDeletePermission ? (\n                  <MenuItem\n                    icon=\"delete\"\n                    text=\"Delete\"\n                    intent=\"danger\"\n                    onClick={() => setVisibleDialog('delete')}\n                  />\n                ) : null}\n              </Menu>\n            }\n          >\n            <Button icon={<Icon name=\"expand_more\" />} />\n          </Popover>\n        ) : null}\n      </Box>\n      <RunConfigDialog\n        isOpen={visibleDialog === 'config'}\n        onClose={() => setVisibleDialog(null)}\n        mode={run.mode}\n        runConfigYaml={run.runConfigYaml}\n        tags={run.tags}\n        isJob={isJob}\n      />\n      {run.status === RunStatus.QUEUED ? (\n        <QueuedRunCriteriaDialog\n          run={run}\n          isOpen={visibleDialog === 'queue-criteria'}\n          onClose={() => setVisibleDialog(null)}\n        />\n      ) : null}\n      {runMetricsEnabled && RunMetricsDialog ? (\n        <RunMetricsDialog\n          runId={run.id}\n          isOpen={visibleDialog === 'metrics'}\n          onClose={() => setVisibleDialog(null)}\n        />\n      ) : null}\n      {run.hasDeletePermission ? (\n        <DeletionDialog\n          isOpen={visibleDialog === 'delete'}\n          onClose={() => setVisibleDialog(null)}\n          onComplete={() => {\n            if (run.repositoryOrigin) {\n              history.push(\n                workspacePipelinePath({\n                  repoName: run.repositoryOrigin.repositoryName,\n                  repoLocation: run.repositoryOrigin.repositoryLocationName,\n                  pipelineName: run.pipelineName,\n                  isJob,\n                  path: '/runs',\n                }),\n              );\n            } else {\n              setVisibleDialog(null);\n            }\n          }}\n          onTerminateInstead={() => setVisibleDialog('terminate')}\n          selectedRuns={{[run.id]: run.canTerminate}}\n        />\n      ) : null}\n      {run.hasTerminatePermission ? (\n        <TerminationDialog\n          isOpen={visibleDialog === 'terminate'}\n          onClose={() => setVisibleDialog(null)}\n          onComplete={() => {\n            refetch();\n          }}\n          selectedRuns={{[run.id]: run.canTerminate}}\n        />\n      ) : null}\n      {run.allPools && run.allPools.length ? (\n        <RunPoolsDialog\n          isOpen={visibleDialog === 'pools'}\n          pools={run.allPools}\n          onClose={() => setVisibleDialog(null)}\n        />\n      ) : null}\n    </div>\n  );\n};\n","import {Box, Popover, Tag} from '@dagster-io/ui-components';\n\nimport {RunTimingDetails} from './RunTimingDetails';\nimport {RunTimingFragment} from './types/RunTimingDetails.types';\nimport {formatElapsedTimeWithoutMsec} from '../app/Util';\nimport {TimestampDisplay} from '../schedules/TimestampDisplay';\n\nexport const RunTimingTags = ({loading, run}: {loading: boolean; run: RunTimingFragment}) => {\n  return (\n    <>\n      {run?.startTime ? (\n        <Popover\n          interactionKind=\"hover\"\n          placement=\"bottom\"\n          content={\n            <Box padding={16}>\n              <RunTimingDetails run={run} loading={loading} />\n            </Box>\n          }\n        >\n          <Tag icon=\"schedule\">\n            <TimestampDisplay\n              timestamp={run.startTime}\n              timeFormat={{showSeconds: true, showTimezone: false}}\n            />\n          </Tag>\n        </Popover>\n      ) : run.updateTime ? (\n        <Tag icon=\"schedule\">\n          <TimestampDisplay\n            timestamp={run.updateTime}\n            timeFormat={{showSeconds: true, showTimezone: false}}\n          />\n        </Tag>\n      ) : undefined}\n      {run?.startTime && run?.endTime ? (\n        <Popover\n          interactionKind=\"hover\"\n          placement=\"bottom\"\n          content={\n            <Box padding={16}>\n              <RunTimingDetails run={run} loading={loading} />\n            </Box>\n          }\n        >\n          <Tag icon=\"timer\">\n            <span style={{fontVariantNumeric: 'tabular-nums'}}>\n              {run?.startTime\n                ? formatElapsedTimeWithoutMsec(\n                    (run?.endTime * 1000 || Date.now()) - run?.startTime * 1000,\n                  )\n                : 'â€“'}\n            </span>\n          </Tag>\n        </Popover>\n      ) : null}\n    </>\n  );\n};\n","import {Box, MiddleTruncate, Tag} from '@dagster-io/ui-components';\nimport {useState} from 'react';\n\nimport {DagsterTag} from './RunTag';\nimport {InstigationSelector} from '../graphql/types';\nimport {TickDetailsDialog} from '../instigation/TickDetailsDialog';\nimport {TickLogDialog} from '../ticks/TickLogDialog';\nimport {TagActionsPopover} from '../ui/TagActions';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {workspacePathFromAddress} from '../workspace/workspacePath';\n\ninterface Props {\n  instigationSelector: InstigationSelector;\n  instigationType: DagsterTag.SensorName | DagsterTag.ScheduleName;\n  tickId: string;\n}\n\nexport const TickTagForRun = ({instigationSelector, instigationType, tickId}: Props) => {\n  const [showDetails, setShowDetails] = useState(false);\n  const [showLogs, setShowLogs] = useState(false);\n  const icon = instigationType === DagsterTag.ScheduleName ? 'schedule' : 'sensors';\n  const {name, repositoryName, repositoryLocationName} = instigationSelector;\n  const repoAddress = buildRepoAddress(repositoryName, repositoryLocationName);\n\n  const actions = [\n    {\n      label: `View ${instigationType === DagsterTag.ScheduleName ? 'schedule' : 'sensor'}`,\n      to: workspacePathFromAddress(\n        repoAddress,\n        `${instigationType === DagsterTag.ScheduleName ? '/schedules' : '/sensors'}/${name}`,\n      ),\n    },\n    {\n      label: 'View tick details',\n      onClick: () => setShowDetails(true),\n    },\n    {\n      label: 'View tick logs',\n      onClick: () => setShowLogs(true),\n    },\n  ];\n\n  return (\n    <>\n      <TagActionsPopover actions={actions} data={{key: 'Launched by', value: name}}>\n        <Tag icon={icon}>\n          <Box flex={{direction: 'row'}}>\n            <span>Launched by&nbsp;</span>\n            <div style={{maxWidth: '140px'}}>\n              <MiddleTruncate text={name} />\n            </div>\n          </Box>\n        </Tag>\n      </TagActionsPopover>\n      <TickDetailsDialog\n        isOpen={showDetails}\n        tickResultType=\"runs\"\n        onClose={() => setShowDetails(false)}\n        instigationSelector={instigationSelector}\n        tickId={tickId}\n      />\n      <TickLogDialog\n        isOpen={showLogs}\n        onClose={() => setShowLogs(false)}\n        instigationSelector={instigationSelector}\n        tickId={tickId}\n      />\n    </>\n  );\n};\n","import {Box, ButtonLink, Icon, MiddleTruncate, Popover, Tag} from '@dagster-io/ui-components';\nimport {useMemo, useState} from 'react';\n\nimport {EvaluationDetailDialog} from './AutoMaterializePolicyPage/EvaluationDetailDialog';\nimport {assetDetailsPathForKey} from './assetDetailsPathForKey';\nimport {AssetKey} from './types';\n\nconst COLLATOR = new Intl.Collator(navigator.language, {sensitivity: 'base'});\n\ntype OpenEvaluation = {\n  assetKeyPath: string[];\n  evaluationId: string;\n};\n\ninterface Props {\n  assetKeys: AssetKey[];\n  evaluationId: string;\n}\n\nexport const AutomaterializeTagWithEvaluation = ({assetKeys, evaluationId}: Props) => {\n  const [openEvaluation, setOpenEvaluation] = useState<OpenEvaluation | null>(null);\n\n  const sortedKeys = useMemo(() => {\n    return [...assetKeys].sort((a, b) => COLLATOR.compare(a.path.join('/'), b.path.join('/')));\n  }, [assetKeys]);\n\n  return (\n    <>\n      <Popover\n        placement=\"bottom\"\n        content={\n          <div style={{width: '400px'}}>\n            <Box padding={{vertical: 8, horizontal: 12}} border=\"bottom\" style={{fontWeight: 600}}>\n              Automation condition\n            </Box>\n            <Box\n              flex={{direction: 'column', gap: 16}}\n              padding={{vertical: 12}}\n              style={{maxHeight: '220px', overflowY: 'auto'}}\n            >\n              {sortedKeys.map((assetKey) => {\n                const url = assetDetailsPathForKey(assetKey, {\n                  view: 'automation',\n                  evaluation: evaluationId,\n                });\n                return (\n                  <Box\n                    key={url}\n                    padding={{vertical: 8, left: 12, right: 16}}\n                    flex={{\n                      direction: 'row',\n                      justifyContent: 'space-between',\n                      alignItems: 'center',\n                      gap: 16,\n                    }}\n                    style={{overflow: 'hidden'}}\n                  >\n                    <Box\n                      flex={{direction: 'row', alignItems: 'center', gap: 8}}\n                      style={{overflow: 'hidden'}}\n                    >\n                      <Icon name=\"asset\" />\n                      <MiddleTruncate text={assetKey.path.join('/')} />\n                    </Box>\n                    <ButtonLink\n                      onClick={() => setOpenEvaluation({assetKeyPath: assetKey.path, evaluationId})}\n                      style={{whiteSpace: 'nowrap'}}\n                    >\n                      View evaluation\n                    </ButtonLink>\n                  </Box>\n                );\n              })}\n            </Box>\n          </div>\n        }\n        interactionKind=\"hover\"\n      >\n        <Tag icon=\"automation_condition\">Automation condition</Tag>\n      </Popover>\n      <EvaluationDetailDialog\n        assetKeyPath={openEvaluation?.assetKeyPath ?? []}\n        isOpen={!!openEvaluation}\n        onClose={() => setOpenEvaluation(null)}\n        evaluationID={openEvaluation?.evaluationId ?? ''}\n      />\n    </>\n  );\n};\n","import {\n  Box,\n  Colors,\n  FontFamily,\n  Icon,\n  NonIdealState,\n  PageHeader,\n  Subtitle1,\n  Tag,\n} from '@dagster-io/ui-components';\nimport {useMemo} from 'react';\nimport {Link, useParams} from 'react-router-dom';\n\nimport {Run} from './Run';\nimport {RunAssetCheckTags} from './RunAssetCheckTags';\nimport {RunAssetTags} from './RunAssetTags';\nimport {RUN_PAGE_FRAGMENT} from './RunFragments';\nimport {RunHeaderActions} from './RunHeaderActions';\nimport {RunStatusTag} from './RunStatusTag';\nimport {DagsterTag, RunTag} from './RunTag';\nimport {RunTimingTags} from './RunTimingTags';\nimport {getBackfillPath} from './RunsFeedUtils';\nimport {TickTagForRun} from './TickTagForRun';\nimport {getExternalRunUrl, isExternalRun} from './externalRuns';\nimport {gql, useQuery} from '../apollo-client';\nimport {RunPageFragment} from './types/RunFragments.types';\nimport {RunRootQuery, RunRootQueryVariables} from './types/RunRoot.types';\nimport {useTrackPageView} from '../app/analytics';\nimport {isHiddenAssetGroupJob} from '../asset-graph/Utils';\nimport {AutomaterializeTagWithEvaluation} from '../assets/AutomaterializeTagWithEvaluation';\nimport {InstigationSelector} from '../graphql/types';\nimport {useDocumentTitle} from '../hooks/useDocumentTitle';\nimport {PipelineReference} from '../pipelines/PipelineReference';\nimport {isThisThingAJob} from '../workspace/WorkspaceContext/util';\nimport {buildRepoAddress} from '../workspace/buildRepoAddress';\nimport {useRepositoryForRunWithParentSnapshot} from '../workspace/useRepositoryForRun';\n\nexport const RunRoot = () => {\n  useTrackPageView();\n\n  const {runId} = useParams<{runId: string}>();\n  useDocumentTitle(runId ? `Run ${runId.slice(0, 8)}` : 'Run');\n\n  const queryResult = useQuery<RunRootQuery, RunRootQueryVariables>(RUN_ROOT_QUERY, {\n    variables: {runId},\n  });\n  const {data, loading} = queryResult;\n\n  const run = data?.pipelineRunOrError.__typename === 'Run' ? data.pipelineRunOrError : null;\n  const snapshotID = run?.pipelineSnapshotId;\n\n  const repoMatch = useRepositoryForRunWithParentSnapshot(run);\n  const repoAddress = repoMatch?.match\n    ? buildRepoAddress(repoMatch.match.repository.name, repoMatch.match.repositoryLocation.name)\n    : null;\n\n  const isJob = useMemo(\n    () => !!(run && repoMatch && isThisThingAJob(repoMatch.match, run.pipelineName)),\n    [run, repoMatch],\n  );\n\n  const automaterializeTag = useMemo(\n    () => run?.tags.find((tag) => tag.key === DagsterTag.AssetEvaluationID) || null,\n    [run],\n  );\n\n  const tickDetails = useMemo(() => {\n    if (repoAddress) {\n      const tags = run?.tags || [];\n      const tickTag = tags.find((tag) => tag.key === DagsterTag.TickId);\n\n      if (tickTag) {\n        const scheduleOrSensor = tags.find(\n          (tag) => tag.key === DagsterTag.ScheduleName || tag.key === DagsterTag.SensorName,\n        );\n        if (scheduleOrSensor) {\n          const instigationSelector: InstigationSelector = {\n            name: scheduleOrSensor.value,\n            repositoryName: repoAddress.name,\n            repositoryLocationName: repoAddress.location,\n          };\n          return {\n            tickId: tickTag.value,\n            instigationType: scheduleOrSensor.key as\n              | DagsterTag.ScheduleName\n              | DagsterTag.SensorName,\n            instigationSelector,\n          };\n        }\n      }\n    }\n\n    return null;\n  }, [run, repoAddress]);\n\n  const partitionTag = run?.tags.find((tag) => tag.key === DagsterTag.Partition);\n\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flexDirection: 'column',\n        minWidth: 0,\n        width: '100%',\n        height: '100%',\n        overflow: 'hidden',\n      }}\n    >\n      <Box\n        flex={{direction: 'row', alignItems: 'flex-start'}}\n        style={{\n          position: 'relative',\n          zIndex: 1,\n        }}\n      >\n        <PageHeader\n          title={<RunHeaderTitle run={run} runId={runId} />}\n          tags={\n            run ? (\n              <Box flex={{direction: 'row', alignItems: 'flex-start', gap: 12, wrap: 'wrap'}}>\n                <RunStatusTag status={run.status} />\n                {!isHiddenAssetGroupJob(run.pipelineName) ? (\n                  <Tag icon=\"run\">\n                    Run of{' '}\n                    <PipelineReference\n                      pipelineName={run?.pipelineName}\n                      pipelineHrefContext={repoAddress || 'repo-unknown'}\n                      snapshotId={snapshotID}\n                      size=\"small\"\n                      isJob={isJob}\n                    />\n                  </Tag>\n                ) : null}\n                {tickDetails ? (\n                  <TickTagForRun\n                    instigationSelector={tickDetails.instigationSelector}\n                    instigationType={tickDetails.instigationType}\n                    tickId={tickDetails.tickId}\n                  />\n                ) : null}\n                {partitionTag && <RunTag tag={partitionTag} />}\n                <RunAssetTags run={run} />\n                <RunAssetCheckTags run={run} />\n                <RunTimingTags run={run} loading={loading} />\n                {automaterializeTag && run.assetSelection?.length ? (\n                  <AutomaterializeTagWithEvaluation\n                    assetKeys={run.assetSelection}\n                    evaluationId={automaterializeTag.value}\n                  />\n                ) : null}\n              </Box>\n            ) : null\n          }\n          right={run ? <RunHeaderActions run={run} isJob={isJob} /> : null}\n        />\n      </Box>\n      <RunById data={data} runId={runId} />\n    </div>\n  );\n};\n\n// Imported via React.lazy, which requires a default export.\n// eslint-disable-next-line import/no-default-export\nexport default RunRoot;\n\nconst RunById = (props: {data: RunRootQuery | undefined; runId: string}) => {\n  const {data, runId} = props;\n\n  if (!data || !data.pipelineRunOrError) {\n    return null;\n  }\n\n  if (data.pipelineRunOrError.__typename !== 'Run') {\n    return (\n      <Box padding={{vertical: 64}}>\n        <NonIdealState\n          icon=\"error\"\n          title=\"No run found\"\n          description=\"The run with this ID does not exist or has been cleaned up.\"\n        />\n      </Box>\n    );\n  }\n\n  if (isExternalRun(data.pipelineRunOrError)) {\n    const externalUrl = getExternalRunUrl(data.pipelineRunOrError);\n    if (externalUrl) {\n      return (\n        <Box padding={{vertical: 64}}>\n          <NonIdealState\n            icon=\"job\"\n            title=\"This run was remotely executed\"\n            description={\n              <Box flex={{direction: 'row', alignItems: 'center'}}>\n                <a href={externalUrl} target=\"_blank\" rel=\"noreferrer\">\n                  View the execution logs\n                </a>\n                <Icon name=\"open_in_new\" size={16} style={{marginLeft: 8}} />\n              </Box>\n            }\n          />\n        </Box>\n      );\n    } else {\n      return (\n        <Box padding={{vertical: 64}}>\n          <NonIdealState\n            icon=\"job\"\n            title=\"No external URL found\"\n            description=\"This run was executed externally, but does not have an external URL.\"\n          />\n        </Box>\n      );\n    }\n  }\n\n  return <Run run={data.pipelineRunOrError} runId={runId} />;\n};\n\nconst RUN_ROOT_QUERY = gql`\n  query RunRootQuery($runId: ID!) {\n    pipelineRunOrError(runId: $runId) {\n      ... on Run {\n        id\n        ...RunPageFragment\n      }\n    }\n  }\n\n  ${RUN_PAGE_FRAGMENT}\n`;\n\nconst RunHeaderTitle = ({run, runId}: {run: RunPageFragment | null; runId: string}) => {\n  const backfillTag = useMemo(\n    () => run?.tags.find((tag) => tag.key === DagsterTag.Backfill),\n    [run],\n  );\n\n  if (backfillTag) {\n    return (\n      <Subtitle1>\n        <Link to=\"/runs\" style={{color: Colors.textLight()}}>\n          Runs\n        </Link>\n        {' / '}\n        <Link to={getBackfillPath(backfillTag.value, 'runs')} style={{color: Colors.textLight()}}>\n          {backfillTag.value}\n        </Link>\n        {' / '}\n        {runId.slice(0, 8)}\n      </Subtitle1>\n    );\n  }\n\n  return (\n    <Subtitle1 style={{display: 'flex', flexDirection: 'row', gap: 6}}>\n      <Link to=\"/runs\">Runs</Link>\n      <span>/</span>\n      <span style={{fontFamily: FontFamily.monospace}}>{runId.slice(0, 8)}</span>\n    </Subtitle1>\n  );\n};\n","import {Box, Button, Icon} from '@dagster-io/ui-components';\nimport {useCallback, useState} from 'react';\n\nimport {IRunMetadataDict, IStepState} from './RunMetadataProvider';\nimport {doneStatuses, failedStatuses} from './RunStatuses';\nimport {DagsterTag} from './RunTag';\nimport {getReexecutionParamsForSelection} from './RunUtils';\nimport {StepSelection} from './StepSelection';\nimport {TerminationDialog, TerminationDialogResult} from './TerminationDialog';\nimport {RunFragment, RunPageFragment} from './types/RunFragments.types';\nimport {useJobAvailabilityErrorForRun} from './useJobAvailabilityErrorForRun';\nimport {useJobReexecution} from './useJobReExecution';\nimport {showSharedToaster} from '../app/DomUtils';\nimport {GraphQueryItem, filterByQuery} from '../app/GraphQueryImpl';\nimport {DEFAULT_DISABLED_REASON} from '../app/Permissions';\nimport {ReexecutionStrategy} from '../graphql/types';\nimport {LaunchButtonConfiguration, LaunchButtonDropdown} from '../launchpad/LaunchButton';\nimport {filterRunSelectionByQuery} from '../run-selection/AntlrRunSelection';\nimport {useRepositoryForRunWithParentSnapshot} from '../workspace/useRepositoryForRun';\n\ninterface RunActionButtonsProps {\n  run: RunPageFragment;\n  selection: StepSelection;\n  graph: GraphQueryItem[];\n  metadata: IRunMetadataDict;\n}\n\nexport const CancelRunButton = ({run}: {run: RunFragment}) => {\n  const {id: runId, canTerminate} = run;\n  const [showDialog, setShowDialog] = useState<boolean>(false);\n  const closeDialog = useCallback(() => setShowDialog(false), []);\n\n  const onComplete = useCallback(\n    async (result: TerminationDialogResult) => {\n      const {errors} = result;\n      const error = runId && errors[runId];\n      if (error && 'message' in error) {\n        await showSharedToaster({\n          message: error.message,\n          icon: 'error',\n          intent: 'danger',\n        });\n      }\n    },\n    [runId],\n  );\n\n  if (!runId) {\n    return null;\n  }\n\n  return (\n    <>\n      <Button\n        icon={<Icon name=\"cancel\" />}\n        intent=\"danger\"\n        disabled={showDialog}\n        onClick={() => setShowDialog(true)}\n      >\n        Terminate\n      </Button>\n      <TerminationDialog\n        isOpen={showDialog}\n        onClose={closeDialog}\n        onComplete={onComplete}\n        selectedRuns={{[runId]: canTerminate}}\n      />\n    </>\n  );\n};\n\nfunction stepSelectionWithState(selection: StepSelection, metadata: IRunMetadataDict) {\n  const stepStates = selection.keys.map(\n    (key) => (key && metadata.steps[key]?.state) || IStepState.PREPARING,\n  );\n\n  return {\n    ...selection,\n    present: selection.keys.length > 0,\n    failed: selection.keys.length && stepStates.includes(IStepState.FAILED),\n    finished: stepStates.every((stepState) =>\n      [IStepState.FAILED, IStepState.SUCCEEDED].includes(stepState),\n    ),\n  };\n}\n\nfunction stepSelectionFromRunTags(\n  run: RunFragment,\n  graph: GraphQueryItem[],\n  metadata: IRunMetadataDict,\n) {\n  const tag = run.tags.find((t) => t.key === DagsterTag.StepSelection);\n  if (!tag) {\n    return null;\n  }\n  return stepSelectionWithState(\n    {keys: filterByQuery(graph, tag.value).all.map((k) => k.name), query: tag.value},\n    metadata,\n  );\n}\n\nexport const canRunAllSteps = (run: Pick<RunFragment, 'status'>) => doneStatuses.has(run.status);\nexport const canRunFromFailure = (run: Pick<RunFragment, 'status' | 'executionPlan'>) =>\n  run.executionPlan && failedStatuses.has(run.status);\n\nexport const RunActionButtons = (props: RunActionButtonsProps) => {\n  const {metadata, graph, run} = props;\n\n  const repoMatch = useRepositoryForRunWithParentSnapshot(run);\n  const jobError = useJobAvailabilityErrorForRun(run);\n\n  const artifactsPersisted = run?.executionPlan?.artifactsPersisted;\n\n  const selection = stepSelectionWithState(props.selection, metadata);\n  const currentRunSelection = stepSelectionFromRunTags(run, graph, metadata);\n  const currentRunIsFromFailure = run.tags?.some(\n    (t) => t.key === DagsterTag.IsResumeRetry && t.value === 'true',\n  );\n\n  const reexecute = useJobReexecution();\n  const reexecuteWithSelection = async (selection: StepSelection) => {\n    if (!run || !repoMatch || !run.pipelineSnapshotId) {\n      return;\n    }\n    const executionParams = getReexecutionParamsForSelection({\n      run,\n      selection,\n      repositoryLocationName: repoMatch.match.repositoryLocation.name,\n      repositoryName: repoMatch.match.repository.name,\n    });\n    await reexecute.onClick(run, executionParams, false);\n  };\n\n  const full: LaunchButtonConfiguration = {\n    icon: 'cached',\n    scope: '*',\n    title: 'All steps in root run',\n    tooltip: 'Re-execute the pipeline run from scratch. Shift-click to adjust tags.',\n    disabled: !canRunAllSteps(run),\n    onClick: (e) => reexecute.onClick(run, ReexecutionStrategy.ALL_STEPS, e.shiftKey),\n  };\n\n  const same: LaunchButtonConfiguration = {\n    icon: 'linear_scale',\n    scope: currentRunSelection?.query || '*',\n    title: 'Same steps',\n    disabled: !currentRunSelection || !(currentRunSelection.finished || currentRunSelection.failed),\n    tooltip: (\n      <div>\n        {!currentRunSelection || !currentRunSelection.present\n          ? 'Re-executes the same step subset used for this run if one was present.'\n          : !currentRunSelection.finished\n            ? 'Wait for all of the steps to finish to re-execute the same subset.'\n            : 'Re-execute the same step subset used for this run:'}\n        <StepSelectionDescription selection={currentRunSelection} />\n      </div>\n    ),\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    onClick: () => reexecuteWithSelection(currentRunSelection!),\n  };\n\n  const selected: LaunchButtonConfiguration = {\n    icon: 'op',\n    scope: selection.query,\n    title: selection.keys.length > 1 ? 'Selected steps' : 'Selected step',\n    disabled: !selection.present || !(selection.finished || selection.failed),\n    tooltip: (\n      <div>\n        {!selection.present\n          ? 'Select a step or type a step subset to re-execute.'\n          : !selection.finished\n            ? 'Wait for the steps to finish to re-execute them.'\n            : 'Re-execute the selected steps with existing configuration:'}\n        <StepSelectionDescription selection={selection} />\n      </div>\n    ),\n    onClick: () => reexecuteWithSelection(selection),\n  };\n\n  const fromSelected: LaunchButtonConfiguration = {\n    icon: 'arrow_forward',\n    title: 'From selected',\n    disabled: !canRunAllSteps(run) || selection.keys.length !== 1,\n    tooltip: 'Re-execute the pipeline downstream from the selected steps.',\n    onClick: async () => {\n      if (!run.executionPlan) {\n        console.warn('Run execution plan must be present to launch from-selected execution');\n        return Promise.resolve();\n      }\n\n      const selectionForPythonFiltering = selection.keys.map((k) => `${k}*`).join(',');\n      const selectionForUIFiltering = selection.keys.map((k) => `name:\"${k}\"+`).join(' or ');\n\n      const selectionKeys = filterRunSelectionByQuery(graph, selectionForUIFiltering).all.map(\n        (node) => node.name,\n      );\n\n      await reexecuteWithSelection({\n        keys: selectionKeys,\n        query: selectionForPythonFiltering,\n      });\n    },\n  };\n\n  const fromFailureEnabled = canRunFromFailure(run);\n\n  const fromFailure: LaunchButtonConfiguration = {\n    icon: 'arrow_forward',\n    title: 'From failure',\n    disabled: !fromFailureEnabled,\n    tooltip: !fromFailureEnabled\n      ? 'Retry is only enabled when the pipeline has failed.'\n      : 'Retry the pipeline run, skipping steps that completed successfully. Shift-click to adjust tags.',\n    onClick: (e) => reexecute.onClick(run, ReexecutionStrategy.FROM_FAILURE, e.shiftKey),\n  };\n\n  const fromAssetFailure: LaunchButtonConfiguration = {\n    icon: 'arrow_forward',\n    title: 'From asset failure',\n    disabled: !fromFailureEnabled,\n    tooltip: !fromFailureEnabled\n      ? 'Retry is only enabled when the pipeline has failed.'\n      : 'Retry the pipeline run, selecting only assets that did not complete successfully. Shift-click to adjust tags.',\n    onClick: (e) => reexecute.onClick(run, ReexecutionStrategy.FROM_ASSET_FAILURE, e.shiftKey),\n  };\n\n  if (!artifactsPersisted) {\n    [selected, same, fromFailure, fromSelected].forEach((option) => {\n      option.disabled = true;\n      option.title =\n        'Retry and re-execute are only enabled on persistent storage. Try rerunning with a different storage configuration.';\n    });\n  }\n\n  const options = [\n    full,\n    same,\n    selected,\n    fromSelected,\n    fromFailure,\n    run.executionPlan?.assetKeys.length ? fromAssetFailure : null,\n  ].filter(Boolean) as LaunchButtonConfiguration[];\n  const preferredRerun = selection.present\n    ? selected\n    : fromFailureEnabled && currentRunIsFromFailure\n      ? fromFailure\n      : currentRunSelection?.present\n        ? same\n        : null;\n\n  const primary = artifactsPersisted && preferredRerun ? preferredRerun : full;\n\n  const tooltip = () => {\n    if (jobError?.tooltip) {\n      return jobError?.tooltip;\n    }\n    return run.hasReExecutePermission ? undefined : DEFAULT_DISABLED_REASON;\n  };\n\n  return (\n    <Box flex={{direction: 'row', gap: 8}}>\n      <Box flex={{direction: 'row'}}>\n        <LaunchButtonDropdown\n          runCount={1}\n          primary={primary}\n          options={options}\n          title={\n            primary.scope === '*'\n              ? `Re-execute all (*)`\n              : primary.scope\n                ? `Re-execute (${primary.scope})`\n                : `Re-execute ${primary.title}`\n          }\n          tooltip={tooltip()}\n          icon={jobError?.icon}\n          disabled={jobError?.disabled || !run.hasReExecutePermission}\n        />\n      </Box>\n      {!doneStatuses.has(run.status) ? <CancelRunButton run={run} /> : null}\n      {reexecute.launchpadElement}\n    </Box>\n  );\n};\n\nconst StepSelectionDescription = ({selection}: {selection: StepSelection | null}) => (\n  <div style={{paddingLeft: '10px'}}>\n    {(selection?.keys || []).map((step) => (\n      <span key={step} style={{display: 'block'}}>{`* ${step}`}</span>\n    ))}\n  </div>\n);\n"],"names":["TickLogDialog","tickId","timestamp","instigationSelector","isOpen","onClose","Dialog","style","width","maxWidth","minWidth","title","span","name","TimestampDisplay","timeFormat","showSeconds","QueryfulTickLogsTable","Box","background","Colors","zIndex","position","DialogFooter","topBorder","Button","onClick","data","loading","useQuery","TICK_LOG_EVENTS_QUERY","variables","notifyOnNetworkStatusChange","events","instigationStateOrError","__typename","tick","logEvents","undefined","height","flex","justifyContent","alignItems","SpinnerWithText","label","length","direction","InstigationEventLogTable","tickStatus","status","instigationType","instigationLoggingDocsUrl","padding","vertical","NonIdealState","icon","description","gap","div","action","ExternalAnchorButton","href","rightIcon","Icon","gql","INSTIGATION_EVENT_LOG_FRAGMENT","SET_CONCURRENCY_LIMIT_MUTATION","DELETE_CONCURRENCY_LIMIT_MUTATION","FREE_CONCURRENCY_SLOTS_MUTATION","RUNS_FOR_CONCURRENCY_KEY_QUERY","Run","memo","run","runId","props","logsFilter","setLogsFilter","useQueryPersistedLogFilter","selectionQuery","setSelectionQuery","useQueryPersistedState","queryKey","defaults","selection","useFavicon","useEffect","el","document","querySelector","previousHref","getAttribute","setAttribute","runStatusFavicon","RunStatus","FAILURE","SUCCESS","STARTING","STARTED","CANCELING","useDocumentTitle","isHiddenAssetGroupJob","pipelineName","slice","onShowStateDetails","stepKey","logs","errorNode","find","node","showCustomAlert","body","PythonErrorInfo","error","onSetSelectionQuery","query","logQuery","token","value","logsDependency","useTraceDependency","RunContext","Provider","LogsProvider","OnLogsLoaded","dependency","RunMetadataProvider","RunWithData","metadata","onSetLogsFilter","useLayoutEffect","completeDependency","CompletionType","queryLogType","setQueryLogType","logType","LogType","structured","logTypeFromQuery","stdout","stderr","computeLogUrl","setComputeLogUrl","useState","stepKeysJSON","JSON","stringify","Object","keys","steps","sort","stepKeys","useMemo","parse","runtimeGraph","executionPlan","toGraphQueryItems","selectionStepKeys","filterRunSelectionByQuery","all","map","n","logCaptureInfo","computeLogFileKey","setComputeLogFileKey","useComputeLogFileKeyForSelection","defaultToFirstStep","logsFilterStepKeys","filter","v","reduce","accum","push","onClickStep","evt","index","indexOf","nextSelectionQuery","shiftKey","removeStepFromSelection","matchingLogKey","matchingComputeLogKeyFromStepKey","logCaptureSteps","expandedPanel","setExpandedPanel","containerRef","useRef","current","size","getSize","isTopExpanded","isBottomExpanded","expandTopPanel","changeSize","resetPanels","SplitPanelContainer","ref","axis","identifier","firstInitialPercent","firstMinSize","first","gantt","ErrorBoundary","region","GanttChart","options","mode","GanttChartMode","WATERFALL_TIMED","toolbarActions","Tooltip","content","RunActionButtons","graph","onSetSelection","focusedTime","GanttChartLoadingState","secondMinSize","second","LogsContainer","LogsToolbar","onSetLogType","lt","setLogType","onSetFilter","onSetComputeLogKey","counts","isSectionExpanded","toggleExpanded","expandBottomPanel","Link","to","runsPathWithFilters","LogsScrollingTable","filterStepKeys","filterKey","CapturedOrExternalLogPanel","logKey","visibleIOType","onSetDownloadUrl","NoStepSelectionState","type","styled","grow","RunAssetCheckTags","skip","queryResult","RUN_ASSETS_CHECKS_QUERY","id","pipelineRunOrError","assetChecks","assetCheckSelection","AssetCheckTagCollection","RunAssetTags","RUN_ASSETS_QUERY","fetchPolicy","assetKeys","assets","a","key","assetKeysForRun","AssetKeyTagCollection","useTags","RunAlertNotifications","RunPoolsDialog","pools","canOutsideClickClose","canEscapeKeyClose","margin","horizontal","PoolTag","pool","intent","RunHeaderActions","isJob","runMetricsEnabled","hasRunMetricsEnabled","visibleDialog","setVisibleDialog","rootServerURI","useContext","AppContext","refetch","RunsQueryRefetchContext","history","useHistory","freeSlots","useMutation","freeConcurrencySlots","resp","showSharedToaster","message","jobLink","workspacePipelineLinkForRun","repositoryName","repositoryOrigin","repositoryLocationName","disabledReason","disabled","AnchorButton","allPools","isExternalRun","hasDeletePermission","Popover","Menu","AISummaryForRunMenuItem","MenuItem","text","window","open","QUEUED","RunMetricsDialog","hasConcurrencyKeySlots","doneStatuses","has","RunConfigDialog","runConfigYaml","tags","QueuedRunCriteriaDialog","DeletionDialog","onComplete","workspacePipelinePath","repoName","repoLocation","path","onTerminateInstead","selectedRuns","canTerminate","hasTerminatePermission","TerminationDialog","RunTimingTags","startTime","interactionKind","placement","RunTimingDetails","Tag","showTimezone","updateTime","endTime","fontVariantNumeric","formatElapsedTimeWithoutMsec","Date","now","TickTagForRun","showDetails","setShowDetails","showLogs","setShowLogs","DagsterTag","ScheduleName","repoAddress","buildRepoAddress","actions","workspacePathFromAddress","TagActionsPopover","MiddleTruncate","TickDetailsDialog","tickResultType","COLLATOR","Intl","Collator","navigator","language","sensitivity","AutomaterializeTagWithEvaluation","openEvaluation","evaluationId","setOpenEvaluation","sortedKeys","b","compare","join","border","fontWeight","maxHeight","overflowY","assetKey","url","assetDetailsPathForKey","view","evaluation","left","right","overflow","ButtonLink","assetKeyPath","whiteSpace","EvaluationDetailDialog","evaluationID","RunRoot","useTrackPageView","useParams","RUN_ROOT_QUERY","snapshotID","pipelineSnapshotId","repoMatch","useRepositoryForRunWithParentSnapshot","match","repository","repositoryLocation","isThisThingAJob","automaterializeTag","tag","AssetEvaluationID","tickDetails","tickTag","TickId","scheduleOrSensor","SensorName","location","partitionTag","Partition","display","flexDirection","PageHeader","RunHeaderTitle","wrap","RunStatusTag","PipelineReference","pipelineHrefContext","snapshotId","RunTag","assetSelection","RunById","externalUrl","getExternalRunUrl","target","rel","marginLeft","RUN_PAGE_FRAGMENT","backfillTag","Backfill","Subtitle1","color","getBackfillPath","fontFamily","FontFamily","monospace","CancelRunButton","showDialog","setShowDialog","closeDialog","useCallback","result","errors","stepSelectionWithState","stepStates","state","IStepState","PREPARING","present","failed","includes","FAILED","finished","every","SUCCEEDED","stepState","canRunAllSteps","failedStatuses","jobError","useJobAvailabilityErrorForRun","artifactsPersisted","currentRunSelection","stepSelectionFromRunTags","t","StepSelection","filterByQuery","k","currentRunIsFromFailure","some","IsResumeRetry","reexecute","useJobReexecution","reexecuteWithSelection","executionParams","getReexecutionParamsForSelection","full","scope","tooltip","ReexecutionStrategy","ALL_STEPS","e","same","StepSelectionDescription","selected","fromSelected","console","warn","Promise","resolve","selectionForPythonFiltering","selectionForUIFiltering","selectionKeys","fromFailureEnabled","canRunFromFailure","fromFailure","FROM_FAILURE","forEach","option","fromAssetFailure","FROM_ASSET_FAILURE","Boolean","preferredRerun","primary","LaunchButtonDropdown","runCount","hasReExecutePermission","DEFAULT_DISABLED_REASON","launchpadElement","paddingLeft","step"],"sourceRoot":"","ignoreList":[]}